#!/usr/bin/env coffee

moment = require 'moment'
pr = require 'bluebird'

client = require('@google/maps').createClient
  key: process.env.GOOGLE_MAPS_API_KEY

travelTime = (start, end) ->
  pr.promisify(client.directions)
    origin: start
    destination: end
    mode: 'driving'
    departure_time: moment().unix()
  .then (response) ->
    # returns a {text:15432, text:"4 hours 17 mins"}
    response.json.routes[0].legs[0].duration_in_traffic

travelTime('seattle, wa', 'stayton, or').then console.log
